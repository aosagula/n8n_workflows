[{"createdAt":"2025-06-14T02:29:55.445Z","updatedAt":"2025-06-16T13:28:10.000Z","id":"XK8lfDyJA1iqatzC","name":"Pizeria Agente","active":true,"isArchived":false,"nodes":[{"parameters":{"public":true,"initialMessages":"Hola como puedo ayudarte?","options":{"inputPlaceholder":"Dime que necesitas.....","showWelcomeScreen":true,"subtitle":"","title":"=","customCss":":root {\n  /* Colors */\n  --chat--color-primary: #e74266;\n  --chat--color-primary-shade-50: #db4061;\n  --chat--color-primary-shade-100: #cf3c5c;\n  --chat--color-secondary: #20b69e;\n  --chat--color-secondary-shade-50: #1ca08a;\n  --chat--color-white: #ffffff;\n  --chat--color-light: #f2f4f8;\n  --chat--color-light-shade-50: #e6e9f1;\n  --chat--color-light-shade-100: #c2c5cc;\n  --chat--color-medium: #d2d4d9;\n  --chat--color-dark: #101330;\n  --chat--color-disabled: #777980;\n  --chat--color-typing: #404040;\n\n  /* Base Layout */\n  --chat--spacing: 1rem;\n  --chat--border-radius: 0.25rem;\n  --chat--transition-duration: 0.15s;\n  --chat--font-family: (\n    -apple-system,\n    BlinkMacSystemFont,\n    'Segoe UI',\n    Roboto,\n    Oxygen-Sans,\n    Ubuntu,\n    Cantarell,\n    'Helvetica Neue',\n    sans-serif\n  );\n\n  /* Window Dimensions */\n  --chat--window--width: 400px;\n  --chat--window--height: 400px;\n  --chat--window--bottom: var(--chat--spacing);\n  --chat--window--right: var(--chat--spacing);\n  --chat--window--z-index: 9999;\n  --chat--window--border: 1px solid var(--chat--color-light-shade-50);\n  --chat--window--border-radius: var(--chat--border-radius);\n  --chat--window--margin-bottom: var(--chat--spacing);\n\n  /* Header Styles */\n  --chat--header-height: auto;\n  --chat--header--padding: var(--chat--spacing);\n  --chat--header--background: var(--chat--color-dark);\n  --chat--header--color: var(--chat--color-light);\n  --chat--header--border-top: none;\n  --chat--header--border-bottom: none;\n  --chat--header--border-left: none;\n  --chat--header--border-right: none;\n  --chat--heading--font-size: 1.2em;\n  --chat--subtitle--font-size: inherit;\n  --chat--subtitle--line-height: 1.8;\n\n  /* Message Styles */\n  --chat--message--font-size: 1rem;\n  --chat--message--padding: var(--chat--spacing);\n  --chat--message--border-radius: var(--chat--border-radius);\n  --chat--message-line-height: 1.5;\n  --chat--message--margin-bottom: calc(var(--chat--spacing) * 1);\n  --chat--message--bot--background: var(--chat--color-white);\n  --chat--message--bot--color: var(--chat--color-dark);\n  --chat--message--bot--border: none;\n  --chat--message--user--background: var(--chat--color-secondary);\n  --chat--message--user--color: var(--chat--color-white);\n  --chat--message--user--border: none;\n  --chat--message--pre--background: rgba(0, 0, 0, 0.05);\n  --chat--messages-list--padding: var(--chat--spacing);\n\n  /* Toggle Button */\n  --chat--toggle--size: 64px;\n  --chat--toggle--width: var(--chat--toggle--size);\n  --chat--toggle--height: var(--chat--toggle--size);\n  --chat--toggle--border-radius: 50%;\n  --chat--toggle--background: var(--chat--color-primary);\n  --chat--toggle--hover--background: var(--chat--color-primary-shade-50);\n  --chat--toggle--active--background: var(--chat--color-primary-shade-100);\n  --chat--toggle--color: var(--chat--color-white);\n\n  /* Input Area */\n  --chat--textarea--height: 50px;\n  --chat--textarea--max-height: 30rem;\n  --chat--input--font-size: inherit;\n  --chat--input--border: 0;\n  --chat--input--border-radius: 0;\n  --chat--input--padding: 0.8rem;\n  --chat--input--background: var(--chat--color-white);\n  --chat--input--text-color: initial;\n  --chat--input--line-height: 1.5;\n  --chat--input--placeholder--font-size: var(--chat--input--font-size);\n  --chat--input--border-active: 0;\n  --chat--input--left--panel--width: 2rem;\n\n  /* Button Styles */\n  --chat--button--color: var(--chat--color-light);\n  --chat--button--background: var(--chat--color-primary);\n  --chat--button--padding: calc(var(--chat--spacing) * 1 / 2) var(--chat--spacing);\n  --chat--button--border-radius: var(--chat--border-radius);\n  --chat--button--hover--color: var(--chat--color-light);\n  --chat--button--hover--background: var(--chat--color-primary-shade-50);\n  --chat--close--button--color-hover: var(--chat--color-primary);\n\n  /* Send and File Buttons */\n  --chat--input--send--button--background: var(--chat--color-white);\n  --chat--input--send--button--color: var(--chat--color-light);\n  --chat--input--send--button--background-hover: var(--chat--color-primary-shade-50);\n  --chat--input--send--button--color-hover: var(--chat--color-secondary-shade-50);\n  --chat--input--file--button--background: var(--chat--color-white);\n  --chat--input--file--button--color: var(--chat--color-secondary);\n  --chat--input--file--button--background-hover: var(--chat--input--file--button--background);\n  --chat--input--file--button--color-hover: var(--chat--color-secondary-shade-50);\n  --chat--files-spacing: 0.25rem;\n\n  /* Body and Footer */\n  --chat--body--background: var(--chat--color-light);\n  --chat--footer--background: var(--chat--color-light);\n  --chat--footer--color: var(--chat--color-dark);\n}\n\n\n/* You can override any class styles, too. Right-click inspect in Chat UI to find class to override. */\n.chat-message {\n\tmax-width: 60%;\n}"}},"type":"@n8n/n8n-nodes-langchain.chatTrigger","typeVersion":1.1,"position":[-200,-100],"id":"9802f417-6ee4-4f00-b39c-5f6c2dcc0ddf","name":"When chat message received","webhookId":"bbc8e471-1834-4d68-b967-41c2eab272dc"},{"parameters":{"options":{"systemMessage":"=Act√∫a como asistente virtual de una pizzer√≠a que atiende pedidos por chat.\n\nObjetivo:\nAtender pedidos, ofrecer solo los productos disponibles, calcular importes desde una hoja de precios, validar pedidos correctamente y preguntar si el cliente quiere retiro o env√≠o.\n\nInstrucciones clave:\n\nDisponibilidad y validaci√≥n de productos:\n\nOfrece solo los productos que figuran en la hoja de c√°lculo \"Precios Pizzer√≠a\" (√∫ltima versi√≥n).\n\nSi el cliente pide algo que no est√° en el men√∫, responde:\nüëâ \"Por el momento no tenemos ese producto en el men√∫. ¬øQuer√©s que te diga qu√© hay disponible?\"\n\nPrecios:\n\nSolo los mencion√°s si el cliente los pide.\n\nCalcul√° el total y el importe de cada √≠tem en base a la hoja, pero solo mostr√°s el total si el cliente lo solicita o al final del pedido para confirmar.\n\nIngredientes:\n\nNo expliques ingredientes ni detalles, salvo que el cliente lo pregunte espec√≠ficamente.\n\nTono y formato:\n\nBreve, claro, amable.\n\nNo uses c√≥digos internos ni nombres t√©cnicos de productos.\n\nConfirmaci√≥n del pedido:\n\nUna vez armado el pedido, pregunt√°:\nüëâ \"¬øVas a pasar a buscar el pedido o prefer√≠s que te lo enviemos?\"\n\nErrores y aclaraciones:\n\nSi un pedido es ambiguo o incluye productos no v√°lidos, ped√≠ que lo aclare o correg√≠ amablemente.\n\n","maxIterations":10}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2,"position":[120,-160],"id":"18508f72-3ac2-419b-8288-1ccd940fe494","name":"AI Agent"},{"parameters":{"model":{"__rl":true,"mode":"list","value":"gpt-4o-mini"},"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.2,"position":[60,100],"id":"fbc27269-9310-4df1-a2d8-c4ae2ad10a83","name":"OpenAI Chat Model","credentials":{"openAiApi":{"id":"otgszdApZbHkcHr9","name":"OpenAi account"}}},{"parameters":{},"type":"@n8n/n8n-nodes-langchain.memoryPostgresChat","typeVersion":1.3,"position":[240,220],"id":"77c175f0-e5b4-4932-8cce-e8607e7987f7","name":"Postgres Chat Memory","credentials":{"postgres":{"id":"gqjYqQjgIR3Jq5Kt","name":"Postgres account"}}},{"parameters":{"mode":"retrieve-as-tool","toolName":"menu","toolDescription":"Devuelve la lista completa de productos disponibles del men√∫ de la pizzer√≠a.","qdrantCollection":{"__rl":true,"value":"piza","mode":"list","cachedResultName":"piza"},"topK":1000,"includeDocumentMetadata":false,"options":{}},"type":"@n8n/n8n-nodes-langchain.vectorStoreQdrant","typeVersion":1.2,"position":[640,-20],"id":"1ba12c1a-f51d-4d53-a627-cf2b7adee257","name":"Qdrant Vector Store","credentials":{"qdrantApi":{"id":"PMx7VP7dV2pZl75P","name":"QdrantApi account 2"}}},{"parameters":{"options":{}},"type":"@n8n/n8n-nodes-langchain.embeddingsOpenAi","typeVersion":1.2,"position":[680,220],"id":"7738cd5a-5bac-462f-98cc-91bed0a1f487","name":"Embeddings OpenAI","credentials":{"openAiApi":{"id":"otgszdApZbHkcHr9","name":"OpenAi account"}}},{"parameters":{"documentId":{"__rl":true,"value":"18WTMa3X8cLZ9aTLbiYhRwQ1KpPIuuEaO8_nlkn8CZjU","mode":"list","cachedResultName":"Precios_Pizzeria_v1","cachedResultUrl":"https://docs.google.com/spreadsheets/d/18WTMa3X8cLZ9aTLbiYhRwQ1KpPIuuEaO8_nlkn8CZjU/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":1760086310,"mode":"list","cachedResultName":"Precios_Pizzeria_Actualizados","cachedResultUrl":"https://docs.google.com/spreadsheets/d/18WTMa3X8cLZ9aTLbiYhRwQ1KpPIuuEaO8_nlkn8CZjU/edit#gid=1760086310"},"options":{}},"type":"n8n-nodes-base.googleSheetsTool","typeVersion":4.6,"position":[500,100],"id":"870b4501-0464-45ef-b35d-b665e9fa6eed","name":"Google Sheets","credentials":{"googleSheetsOAuth2Api":{"id":"dc29YQY20KdfNQBq","name":"Google Sheets account"}}}],"connections":{"When chat message received":{"main":[[{"node":"AI Agent","type":"main","index":0}]]},"OpenAI Chat Model":{"ai_languageModel":[[{"node":"AI Agent","type":"ai_languageModel","index":0}]]},"Postgres Chat Memory":{"ai_memory":[[{"node":"AI Agent","type":"ai_memory","index":0}]]},"Qdrant Vector Store":{"ai_tool":[[{"node":"AI Agent","type":"ai_tool","index":0}]]},"Embeddings OpenAI":{"ai_embedding":[[{"node":"Qdrant Vector Store","type":"ai_embedding","index":0}]]},"AI Agent":{"main":[[]]},"Google Sheets":{"ai_tool":[[{"node":"AI Agent","type":"ai_tool","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"f0afa5e3-6fdb-4e2f-b5e2-e62704dab144","triggerCount":1,"tags":[]}]